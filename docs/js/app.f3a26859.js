(function(e){function t(t){for(var r,a,o=t[0],c=t[1],u=t[2],l=0,h=[];l<o.length;l++)a=o[l],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&h.push(i[a][0]),i[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);p&&p(t);while(h.length)h.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],r=!0,a=1;a<n.length;a++){var c=n[a];0!==i[c]&&(r=!1)}r&&(s.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},i={app:0},s=[];function a(e){return o.p+"js/"+({about:"about"}[e]||e)+"."+{about:"4f6d0b63"}[e]+".js"}function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.e=function(e){var t=[],n=i[e];if(0!==n)if(n)t.push(n[2]);else{var r=new Promise((function(t,r){n=i[e]=[t,r]}));t.push(n[2]=r);var s,c=document.createElement("script");c.charset="utf-8",c.timeout=120,o.nc&&c.setAttribute("nonce",o.nc),c.src=a(e);var u=new Error;s=function(t){c.onerror=c.onload=null,clearTimeout(l);var n=i[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+r+": "+s+")",u.name="ChunkLoadError",u.type=r,u.request=s,n[1](u)}i[e]=void 0}};var l=setTimeout((function(){s({type:"timeout",target:c})}),12e4);c.onerror=c.onload=s,document.head.appendChild(c)}return Promise.all(t)},o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/vue-tower-defense/",o.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var p=u;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"09dd":function(e,t,n){},"5ac2":function(e,t,n){e.exports=n.p+"img/bilberry.3431f04a.png"},"5c0b":function(e,t,n){"use strict";var r=n("9c0c"),i=n.n(r);i.a},"66f9":function(e,t,n){"use strict";var r=n("09dd"),i=n.n(r);i.a},"73bb":function(e,t,n){e.exports=n.p+"img/ground-1.3cacfc42.jpg"},"862a":function(e,t,n){e.exports=n.p+"img/pistachio.054a561b.png"},"97bc":function(e,t,n){e.exports=n.p+"img/pistachio-ill.924af0fe.png"},"9c0c":function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);n("e623"),n("e379"),n("5dc8"),n("37e1");var r=n("2b0e"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("canvas",{ref:"canvas",class:"level-"+e.levelNumber,style:e.styles,attrs:{id:"canvas"}}),n("LevelUserInterface",{attrs:{"level-number":e.levelNumber}})],1)},s=[],a=(n("96cf"),n("1da1")),o=(n("d3b7"),n("3ca3"),n("10d1"),n("ddb0"),n("d4ec")),c=n("bee2"),u=n("5364"),l=n("9bd1"),p=1900,h=1.5625,f=100,d=1,b=function(){function e(){Object(o["a"])(this,e),v.set(this,{writable:!0,value:void 0}),Object(l["a"])(this,v,r["a"].observable({el:null,ctx:null,width:0,height:0,offsetTop:0,interactiveCellSize:0}))}return Object(c["a"])(e,[{key:"init",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.setElement(),this.setContext(),e.next=4,this.setSizes();case 4:return this.setOffsetTop(),this.setInteractiveCellSize(),e.abrupt("return",Promise.resolve());case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"clear",value:function(){this.context.clearRect(0,0,this.width,this.height)}},{key:"setElement",value:function(){Object(u["a"])(this,v).el=document.getElementById("canvas")}},{key:"setContext",value:function(){Object(u["a"])(this,v).ctx=this.el.getContext("2d")}},{key:"setSizes",value:function(){var t=this;return new Promise((function(n){var r=p,i=window.innerWidth,s=window.innerHeight,a=Math.min(i,r),o=e.getHeightDependsOnWidth(a);while(o>s)a-=1,o=e.getHeightDependsOnWidth(a);Object(u["a"])(t,v).width=a,Object(u["a"])(t,v).height=o,Object(u["a"])(t,v).el.width=a,Object(u["a"])(t,v).el.height=o,n()}))}},{key:"setOffsetTop",value:function(){Object(u["a"])(this,v).offsetTop=this.el.offsetTop}},{key:"setInteractiveCellSize",value:function(){Object(u["a"])(this,v).interactiveCellSize=this.width/25}},{key:"el",get:function(){return Object(u["a"])(this,v).el||{styles:{},offsetTop:0}}},{key:"context",get:function(){return Object(u["a"])(this,v).ctx}},{key:"width",get:function(){return Object(u["a"])(this,v).width}},{key:"height",get:function(){return Object(u["a"])(this,v).height}},{key:"offsetTop",get:function(){return Object(u["a"])(this,v).offsetTop}},{key:"styles",get:function(){return{width:"".concat(this.width,"px"),height:"".concat(this.height,"px")}}},{key:"interactiveCellSize",get:function(){return Object(u["a"])(this,v).interactiveCellSize}}],[{key:"getHeightDependsOnWidth",value:function(e){return e/h}}]),e}(),v=new WeakMap,m=new b,g=(n("4160"),n("159b"),n("cb29"),n("73bb")),w=n.n(g),y=6,O={roadImage:w.a,roadMap:[{posX:0,posY:7},{posX:1,posY:7},{posX:2,posY:7},{posX:3,posY:7},{posX:4,posY:7},{posX:5,posY:7},{posX:6,posY:7},{posX:7,posY:7},{posX:8,posY:7},{posX:9,posY:7},{posX:9,posY:8},{posX:9,posY:9},{posX:9,posY:10},{posX:10,posY:10},{posX:11,posY:10},{posX:12,posY:10},{posX:13,posY:10},{posX:14,posY:10},{posX:15,posY:10},{posX:16,posY:10},{posX:16,posY:9},{posX:16,posY:8},{posX:16,posY:7},{posX:16,posY:6},{posX:16,posY:5},{posX:16,posY:4},{posX:16,posY:3},{posX:17,posY:3},{posX:18,posY:3},{posX:19,posY:3},{posX:20,posY:3},{posX:21,posY:3},{posX:22,posY:3},{posX:23,posY:3},{posX:24,posY:3}],units:Array(y).fill("Bilberry",0,1).fill("Pistachio",1,3).fill("PistachioIll",3,y),spawnDelay:6e3},j={1:O};function x(e){return j[e]}var k={get:x},X=n("262e"),Y=n("2caf"),C=n("862a"),S=n.n(C),I=function(){function e(t,n){Object(o["a"])(this,e),z.set(this,{writable:!0,value:void 0}),Object(l["a"])(this,z,r["a"].observable({health:0,speed:0,image:{width:0,height:0,el:null,src:""},x:0,y:0})),Object(u["a"])(this,z).health=t.health||f,Object(u["a"])(this,z).speed=t.speed||d,Object(u["a"])(this,z).x=t.x,Object(u["a"])(this,z).y=t.y,Object(u["a"])(this,z).image.width=n,Object(u["a"])(this,z).image.height=n,Object(u["a"])(this,z).image.src=t.image}return Object(c["a"])(e,[{key:"loadImage",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return Object(u["a"])(this,z).image.el=new Image,Object(u["a"])(this,z).image.el.src=Object(u["a"])(this,z).image.src,e.abrupt("return",new Promise((function(e){Object(u["a"])(t,z).image.el.onload=function(){return e()}})));case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"draw",value:function(){var e=Object(u["a"])(this,z),t=e.x,n=e.y,r=Object(u["a"])(this,z).image,i=r.width,s=r.height,a=r.el;m.context.drawImage(a,t,n,i,s)}},{key:"move",value:function(){Object(u["a"])(this,z).x+=this.speed}},{key:"health",get:function(){return Object(u["a"])(this,z).health}},{key:"speed",get:function(){return Object(u["a"])(this,z).speed}}]),e}(),z=new WeakMap,R=function(e){Object(X["a"])(n,e);var t=Object(Y["a"])(n);function n(e,r,i){return Object(o["a"])(this,n),t.call(this,{image:S.a,x:r,y:i},e)}return n}(I),T=n("97bc"),N=n.n(T),P=function(e){Object(X["a"])(n,e);var t=Object(Y["a"])(n);function n(e,r,i){return Object(o["a"])(this,n),t.call(this,{image:N.a,health:f/2,speed:1.1*d,x:r,y:i},e)}return n}(I),E=n("5ac2"),A=n.n(E),_=function(e){Object(X["a"])(n,e);var t=Object(Y["a"])(n);function n(e,r,i){return Object(o["a"])(this,n),t.call(this,{image:A.a,health:1.3*f,speed:.8*d,x:r,y:i},e)}return n}(I),U=function(){function e(){Object(o["a"])(this,e)}return Object(c["a"])(e,null,[{key:"createUnit",value:function(e,t,n,r){switch(e){case"Pistachio":return new R(t,n,r);case"PistachioIll":return new P(t,n,r);case"Bilberry":return new _(t,n,r);default:throw new Error("INCORRECT UNIT CLASS NAME: ".concat(e))}}}]),e}(),M=function(){function e(){Object(o["a"])(this,e),L.set(this,{writable:!0,value:void 0}),Object(l["a"])(this,L,r["a"].observable({levelNumber:0,units:[],start:[0,0],assets:{road:new Image}}))}return Object(c["a"])(e,[{key:"init",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return Object(u["a"])(this,L).levelNumber=t,this.setStartCoords(),e.next=4,this.loadAssets();case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"drawRoad",value:function(){var t=this,n=k.get(this.level),r=n.roadMap;r.forEach((function(n){var r=n.posX*e.cellSize,i=n.posY*e.cellSize,s=e.cellSize,a=s;m.context.drawImage(t.assets.road,r,i,s,a)}))}},{key:"drawUnits",value:function(){Object(u["a"])(this,L).units.forEach((function(e){e.draw()}))}},{key:"createUnit",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(n){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=U.createUnit(this.getUnitNameByIndex(n),e.cellSize,this.startCoords.x,this.startCoords.y),t.next=3,r.loadImage();case 3:Object(u["a"])(this,L).units.push(r);case 4:case"end":return t.stop()}}),t,this)})));function n(e){return t.apply(this,arguments)}return n}()},{key:"moveUnits",value:function(){Object(u["a"])(this,L).units.forEach((function(e){e.move()}))}},{key:"loadAssets",value:function(){var t=this,n=k.get(this.level),r=n.roadImage;return Object(u["a"])(this,L).assets.road=new Image(e.cellSize,e.cellSize),Object(u["a"])(this,L).assets.road.src=r,new Promise((function(e){Object(u["a"])(t,L).assets.road.onload=function(){return e()}}))}},{key:"setStartCoords",value:function(){var e=k.get(this.level),t=e.roadMap;Object(u["a"])(this,L).start[0]=t[0].posX,Object(u["a"])(this,L).start[1]=t[0].posY}},{key:"getUnitNameByIndex",value:function(e){var t=k.get(this.level),n=t.units;return n[e]}},{key:"spawnDelay",get:function(){return k.get(this.level).spawnDelay}},{key:"unitsCount",get:function(){return k.get(this.level).units.length}},{key:"level",get:function(){return Object(u["a"])(this,L).levelNumber}},{key:"startCoords",get:function(){return{x:Object(u["a"])(this,L).start[0]*e.cellSize,y:Object(u["a"])(this,L).start[1]*e.cellSize}}},{key:"assets",get:function(){return Object(u["a"])(this,L).assets}}],[{key:"cellSize",get:function(){return m.interactiveCellSize}}]),e}(),L=new WeakMap,q=new M,D=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"wrapper",style:e.styles},[n("LevelNumber",{attrs:{"level-number":e.levelNumber}})],1)},W=[],H=(n("a9e3"),function(e,t){var n=t._c;return n("div",{staticClass:"level-wrapper"},[n("div",{staticClass:"level-value",domProps:{textContent:t._s(t.props.levelNumber)}}),n("div",{staticClass:"level-label",domProps:{textContent:t._s("level")}})])}),B=[],$=r["a"].extend({props:{levelNumber:{type:Number,required:!0}}}),F=$,J=(n("66f9"),n("2877")),G=Object(J["a"])(F,H,B,!0,null,"78affe84",null),K=G.exports,Q=r["a"].extend({components:{LevelNumber:K},props:{levelNumber:{type:Number,required:!0}},computed:{styles:function(){return{bottom:"".concat(m.offsetTop,"px"),width:"".concat(m.width,"px")}}}}),V=Q,Z=(n("f336"),Object(J["a"])(V,D,W,!1,null,"148ac2d9",null)),ee=Z.exports,te=r["a"].extend({components:{LevelUserInterface:ee},data:function(){return{levelNumber:1,animRequestId:0,resizeTimeoutId:0}},computed:{styles:function(){return m.styles}},mounted:function(){this.initApp(),window.addEventListener("resize",this.onResize)},methods:{initApp:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return window.cancelAnimationFrame(e.animRequestId),t.next=3,m.init();case 3:return t.next=5,q.init(e.levelNumber);case 5:return t.next=7,e.unitsConveyer(0);case 7:e.drawAll();case 8:case"end":return t.stop()}}),t)})))()},unitsConveyer:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,q.createUnit(e);case 2:r=e+1,r<q.unitsCount&&setTimeout(t.unitsConveyer.bind(t,r),q.spawnDelay);case 4:case"end":return n.stop()}}),n)})))()},drawAll:function(){m.clear(),q.drawRoad(),q.moveUnits(),q.drawUnits(),this.animRequestId=window.requestAnimationFrame(this.drawAll)},onResize:function(){window.clearTimeout(this.resizeTimeoutId),this.resizeTimeoutId=setTimeout(this.initApp,300)}}}),ne=te,re=(n("5c0b"),Object(J["a"])(ne,i,s,!1,null,null,null)),ie=re.exports,se=n("8c4f"),ae=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"})},oe=[],ce={name:"Home"},ue=ce,le=Object(J["a"])(ue,ae,oe,!1,null,null,null),pe=le.exports;r["a"].use(se["a"]);var he=[{path:"/",name:"Home",component:pe},{path:"/about",name:"About",component:function(){return n.e("about").then(n.bind(null,"f820"))}}],fe=new se["a"]({mode:"history",base:"/vue-tower-defense/",routes:he}),de=fe;r["a"].config.productionTip=!1,new r["a"]({router:de,render:function(e){return e(ie)}}).$mount("#app")},d7fe:function(e,t,n){},f336:function(e,t,n){"use strict";var r=n("d7fe"),i=n.n(r);i.a}});