(function(e){function t(t){for(var r,a,o=t[0],u=t[1],c=t[2],l=0,h=[];l<o.length;l++)a=o[l],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&h.push(i[a][0]),i[a]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);p&&p(t);while(h.length)h.shift()();return s.push.apply(s,c||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],r=!0,a=1;a<n.length;a++){var u=n[a];0!==i[u]&&(r=!1)}r&&(s.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},i={app:0},s=[];function a(e){return o.p+"js/"+({about:"about"}[e]||e)+"."+{about:"4f6d0b63"}[e]+".js"}function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.e=function(e){var t=[],n=i[e];if(0!==n)if(n)t.push(n[2]);else{var r=new Promise((function(t,r){n=i[e]=[t,r]}));t.push(n[2]=r);var s,u=document.createElement("script");u.charset="utf-8",u.timeout=120,o.nc&&u.setAttribute("nonce",o.nc),u.src=a(e);var c=new Error;s=function(t){u.onerror=u.onload=null,clearTimeout(l);var n=i[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+r+": "+s+")",c.name="ChunkLoadError",c.type=r,c.request=s,n[1](c)}i[e]=void 0}};var l=setTimeout((function(){s({type:"timeout",target:u})}),12e4);u.onerror=u.onload=s,document.head.appendChild(u)}return Promise.all(t)},o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/vue-tower-defense/",o.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],c=u.push.bind(u);u.push=t,u=u.slice();for(var l=0;l<u.length;l++)t(u[l]);var p=c;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"09dd":function(e,t,n){},"5c0b":function(e,t,n){"use strict";var r=n("9c0c"),i=n.n(r);i.a},"66f9":function(e,t,n){"use strict";var r=n("09dd"),i=n.n(r);i.a},"73bb":function(e,t,n){e.exports=n.p+"img/ground-1.3cacfc42.jpg"},"862a":function(e,t,n){e.exports=n.p+"img/pistachio.054a561b.png"},"97bc":function(e,t,n){e.exports=n.p+"img/pistachio-ill.924af0fe.png"},"9c0c":function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);n("e623"),n("e379"),n("5dc8"),n("37e1");var r=n("2b0e"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("canvas",{ref:"canvas",style:e.styles,attrs:{id:"canvas"}}),n("LevelUserInterface",{attrs:{"level-number":e.levelNumber}})],1)},s=[],a=(n("96cf"),n("1da1")),o=(n("d3b7"),n("3ca3"),n("10d1"),n("ddb0"),n("d4ec")),u=n("bee2"),c=n("5364"),l=n("9bd1"),p=1900,h=100,f=1,d=1.5625,b=function(){function e(){Object(o["a"])(this,e),v.set(this,{writable:!0,value:void 0}),Object(l["a"])(this,v,r["a"].observable({el:null,ctx:null,width:0,height:0,offsetTop:0}))}return Object(u["a"])(e,[{key:"init",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.setElement(),this.setContext(),e.next=4,this.setSizes();case 4:return this.setOffsetTop(),e.abrupt("return",Promise.resolve());case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"clear",value:function(){this.context.clearRect(0,0,this.width,this.height)}},{key:"setElement",value:function(){Object(c["a"])(this,v).el=document.getElementById("canvas")}},{key:"setContext",value:function(){Object(c["a"])(this,v).ctx=this.el.getContext("2d")}},{key:"setSizes",value:function(){var t=this;return new Promise((function(n){var r=p,i=window.innerWidth,s=window.innerHeight,a=Math.min(i,r),o=e.getHeightDependsOnWidth(a);while(o>s)a-=1,o=e.getHeightDependsOnWidth(a);Object(c["a"])(t,v).width=a,Object(c["a"])(t,v).height=o,Object(c["a"])(t,v).el.width=a,Object(c["a"])(t,v).el.height=o,n()}))}},{key:"setOffsetTop",value:function(){Object(c["a"])(this,v).offsetTop=this.el.offsetTop}},{key:"el",get:function(){return Object(c["a"])(this,v).el||{styles:{},offsetTop:0}}},{key:"context",get:function(){return Object(c["a"])(this,v).ctx}},{key:"width",get:function(){return Object(c["a"])(this,v).width}},{key:"height",get:function(){return Object(c["a"])(this,v).height}},{key:"offsetTop",get:function(){return Object(c["a"])(this,v).offsetTop}},{key:"styles",get:function(){return{width:"".concat(this.width,"px"),height:"".concat(this.height,"px")}}}],[{key:"getHeightDependsOnWidth",value:function(e){return e/d}}]),e}(),v=new WeakMap,m=new b,g=(n("4160"),n("159b"),n("cb29"),n("73bb")),w=n.n(g),y=6,O={roadImage:w.a,roadMap:[{posX:0,posY:7},{posX:1,posY:7},{posX:2,posY:7},{posX:3,posY:7},{posX:4,posY:7},{posX:5,posY:7},{posX:6,posY:7},{posX:7,posY:7},{posX:8,posY:7},{posX:9,posY:7},{posX:9,posY:8},{posX:9,posY:9},{posX:9,posY:10},{posX:10,posY:10},{posX:11,posY:10},{posX:12,posY:10},{posX:13,posY:10},{posX:14,posY:10},{posX:15,posY:10},{posX:16,posY:10},{posX:16,posY:9},{posX:16,posY:8},{posX:16,posY:7},{posX:16,posY:6},{posX:16,posY:5},{posX:16,posY:4},{posX:16,posY:3},{posX:17,posY:3},{posX:18,posY:3},{posX:19,posY:3},{posX:20,posY:3},{posX:21,posY:3},{posX:22,posY:3},{posX:23,posY:3},{posX:24,posY:3}],units:Array(y).fill("pistachio",0,3).fill("pistachioIll",3,y),spawnDelay:2e3},j={1:O};function x(e){return j[e]}var k={get:x},X=n("262e"),Y=n("2caf"),C=n("862a"),S=n.n(C),z=function(){function e(t,n){Object(o["a"])(this,e),I.set(this,{writable:!0,value:void 0}),Object(l["a"])(this,I,r["a"].observable({health:0,speed:0,image:{width:0,height:0,el:null,src:""},x:0,y:0})),Object(c["a"])(this,I).health=t.health||h,Object(c["a"])(this,I).speed=t.speed||f,Object(c["a"])(this,I).x=t.x,Object(c["a"])(this,I).y=t.y,Object(c["a"])(this,I).image.width=n,Object(c["a"])(this,I).image.height=n,Object(c["a"])(this,I).image.src=t.image}return Object(u["a"])(e,[{key:"loadImage",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return Object(c["a"])(this,I).image.el=new Image,Object(c["a"])(this,I).image.el.src=Object(c["a"])(this,I).image.src,e.abrupt("return",new Promise((function(e){Object(c["a"])(t,I).image.el.onload=function(){return e()}})));case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"draw",value:function(){var e=Object(c["a"])(this,I),t=e.x,n=e.y,r=Object(c["a"])(this,I).image,i=r.width,s=r.height,a=r.el;m.context.drawImage(a,t,n,i,s)}},{key:"move",value:function(){Object(c["a"])(this,I).x+=this.speed}},{key:"health",get:function(){return Object(c["a"])(this,I).health}},{key:"speed",get:function(){return Object(c["a"])(this,I).speed}}]),e}(),I=new WeakMap,R=function(e){Object(X["a"])(n,e);var t=Object(Y["a"])(n);function n(e,r,i){return Object(o["a"])(this,n),t.call(this,{image:S.a,x:r,y:i},e)}return n}(z),T=n("97bc"),N=n.n(T),P=function(e){Object(X["a"])(n,e);var t=Object(Y["a"])(n);function n(e,r,i){return Object(o["a"])(this,n),t.call(this,{image:N.a,health:h/2,speed:1.1*f,x:r,y:i},e)}return n}(z),_={pistachio:R,pistachioIll:P};function M(e){return _[e]}var A={get:M},E=function(){function e(){Object(o["a"])(this,e),U.set(this,{writable:!0,value:void 0}),Object(l["a"])(this,U,r["a"].observable({interactiveCellSize:0,levelNumber:0,units:[],start:[0,0],assets:{road:""}}))}return Object(u["a"])(e,[{key:"init",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.setLevelNumber(n),this.setStartUnitCoords(),this.setInteractiveCellSize(t),e.next=5,this.loadAssets();case 5:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"setLevelNumber",value:function(e){Object(c["a"])(this,U).levelNumber=e}},{key:"drawRoad",value:function(){for(var e=k.get(this.level),t=e.roadMap,n=0;n<t.length;n+=1)m.context.drawImage(this.assets.road,t[n].posX*this.cellSize,t[n].posY*this.cellSize,this.cellSize+1,this.cellSize+1)}},{key:"createUnit",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,r,i,s,a,o,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=k.get(this.level),r=n.units,i=r[t],s=A.get(i),a=Math.round(this.startCoords.x*this.cellSize),o=Math.round(this.startCoords.y*this.cellSize),u=new s(this.cellSize,a,o),e.next=8,u.loadImage();case 8:return Object(c["a"])(this,U).units.push(u),e.abrupt("return",u);case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"drawUnits",value:function(){Object(c["a"])(this,U).units.forEach((function(e){e.draw()}))}},{key:"moveUnits",value:function(){Object(c["a"])(this,U).units.forEach((function(e){e.move()}))}},{key:"loadAssets",value:function(){var e=this,t=k.get(this.level),n=t.roadImage;return Object(c["a"])(this,U).assets.road=new Image(this.cellSize,this.cellSize),Object(c["a"])(this,U).assets.road.src=n,new Promise((function(t){Object(c["a"])(e,U).assets.road.onload=function(){return t()}}))}},{key:"setStartUnitCoords",value:function(){var e=k.get(this.level),t=e.roadMap,n=t[0];Object(c["a"])(this,U).start[0]=n.posX,Object(c["a"])(this,U).start[1]=n.posY}},{key:"setInteractiveCellSize",value:function(e){Object(c["a"])(this,U).interactiveCellSize=Math.round(e/25)}},{key:"spawnDelay",get:function(){return k.get(this.level).spawnDelay}},{key:"unitsCount",get:function(){return k.get(this.level).units.length}},{key:"cellSize",get:function(){return Object(c["a"])(this,U).interactiveCellSize}},{key:"level",get:function(){return Object(c["a"])(this,U).levelNumber}},{key:"startCoords",get:function(){return{x:Object(c["a"])(this,U).start[0],y:Object(c["a"])(this,U).start[1]}}},{key:"assets",get:function(){return Object(c["a"])(this,U).assets}}]),e}(),U=new WeakMap,L=new E,q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"wrapper",style:e.styles},[n("LevelNumber",{attrs:{"level-number":e.levelNumber}})],1)},D=[],W=(n("a9e3"),function(e,t){var n=t._c;return n("div",{staticClass:"level-wrapper"},[n("div",{staticClass:"level-value",domProps:{textContent:t._s(t.props.levelNumber)}}),n("div",{staticClass:"level-label",domProps:{textContent:t._s("level")}})])}),H=[],$=r["a"].extend({props:{levelNumber:{type:Number,required:!0}}}),F=$,J=(n("66f9"),n("2877")),B=Object(J["a"])(F,W,H,!0,null,"78affe84",null),G=B.exports,K=r["a"].extend({components:{LevelNumber:G},props:{levelNumber:{type:Number,required:!0}},computed:{styles:function(){return{bottom:"".concat(m.offsetTop,"px"),width:"".concat(m.width,"px")}}}}),Q=K,V=(n("f336"),Object(J["a"])(Q,q,D,!1,null,"148ac2d9",null)),Z=V.exports,ee=r["a"].extend({components:{LevelUserInterface:Z},data:function(){return{levelNumber:1,animRequestId:0,resizeTimeoutId:0}},computed:{styles:function(){return m.styles}},mounted:function(){this.initApp(),window.addEventListener("resize",this.onResize)},methods:{initApp:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return window.cancelAnimationFrame(e.animRequestId),t.next=3,m.init();case 3:return t.next=5,L.init(m.width,e.levelNumber);case 5:return t.next=7,e.unitsConveyer(0);case 7:e.drawAll();case 8:case"end":return t.stop()}}),t)})))()},unitsConveyer:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,L.createUnit(e);case 2:r=e+1,r<L.unitsCount&&setTimeout(t.unitsConveyer.bind(t,r),L.spawnDelay);case 4:case"end":return n.stop()}}),n)})))()},drawAll:function(){m.clear(),L.drawRoad(),L.moveUnits(),L.drawUnits(),this.animRequestId=window.requestAnimationFrame(this.drawAll)},onResize:function(){window.clearTimeout(this.resizeTimeoutId),this.resizeTimeoutId=setTimeout(this.initApp,300)}}}),te=ee,ne=(n("5c0b"),Object(J["a"])(te,i,s,!1,null,null,null)),re=ne.exports,ie=n("8c4f"),se=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"})},ae=[],oe={name:"Home"},ue=oe,ce=Object(J["a"])(ue,se,ae,!1,null,null,null),le=ce.exports;r["a"].use(ie["a"]);var pe=[{path:"/",name:"Home",component:le},{path:"/about",name:"About",component:function(){return n.e("about").then(n.bind(null,"f820"))}}],he=new ie["a"]({mode:"history",base:"/vue-tower-defense/",routes:pe}),fe=he;r["a"].config.productionTip=!1,new r["a"]({router:fe,render:function(e){return e(re)}}).$mount("#app")},d7fe:function(e,t,n){},f336:function(e,t,n){"use strict";var r=n("d7fe"),i=n.n(r);i.a}});